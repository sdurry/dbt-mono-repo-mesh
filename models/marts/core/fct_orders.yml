version: 2

models:
  - name: fct_orders
    description: orders fact table
    config:
      access: public
      contract:
        enforced: true
    columns:
      - name: order_key
        description: primary key of the model
        data_type: number
        constraints:
          - type: not_null
          - type: primary_key # not enforced  -- will warn & include
          - type: check       # not supported -- will warn & skip
            expression: "id > 0"
        data_tests:
          - unique
      - name: customer_key
        description: foreign key for customers
        data_type: number
        constraints:
          - type: not_null
        data_tests:
          - relationships:
              arguments:
                to: ref('dim_customers')
                field: customer_key
      - name: order_date
        description: date of the order
        data_type: date
        data_tests:
          - not_null
      - name: status_code
        description: status of the order
        data_type: varchar(1)
        data_tests:
          - accepted_values:
              config:
                severity: warn
              arguments:
                values:
                  - "F"
                  - "O"
      - name: priority_code
        description: code associated with the order
        data_type: varchar(20)
      - name: clerk_name
        description: id of the clerk
        data_type: varchar(40)
      - name: ship_priority
        description: numeric representation of the shipping priority, zero being the default
        data_type: int
      - name: order_count
        description: count of order
        data_type: int
      - name: gross_item_sales_amount
        description: '{{ doc("gross_item_sales_amount") }}'
        data_type: number
      - name: item_discount_amount
        description: '{{ doc("item_discount_amount") }}'
        data_type: number
      - name: item_tax_amount
        description: '{{ doc("item_tax_amount") }}'
        data_type: number
      - name: net_item_sales_amount
        description: '{{ doc("net_item_sales_amount") }}'
        data_type: number
